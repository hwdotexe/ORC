<form class="px-4 pb-5" [formGroup]="composeReviewForm" (ngSubmit)="this.submit()" (keydown.enter)="$event.preventDefault()">
  <div class="inline-block align-middle my-4">
    <div class="mx-2 my-5">
      <p class="text-gray-600 font-semibold">
        <i class="fa-solid fa-pen mr-2"></i>
        Review Information
      </p>
      <p class="text-sm text-gray-600 my-1 py-1 italic">What did you think of the place?</p>
      <hr />
    </div>

    <div class="inline-block text-left align-bottom my-1">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Review Title</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'title'" [showErrors]="showErrorValidations$"></ui-form-error>
      <input styled formControlName="title" placeholder="My Review" />
    </div>

    <div class="inline-block text-left align-bottom my-1">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Star Rating</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'starRating'" [showErrors]="showErrorValidations$"></ui-form-error>
      <input styled formControlName="starRating" placeholder="3.5" type="number" step="0.5" />
    </div>

    <br />

    <div class="text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Review Summary</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'summary'" [showErrors]="showErrorValidations$"></ui-form-error>
      <textarea styled formControlName="summary" placeholder="I really liked the decor" aria-multiline="true"></textarea>
    </div>

    <div class="mx-2 my-5">
      <p class="text-gray-600 font-semibold">
        <i class="fa-solid fa-house mr-2"></i>
        Venue Information
      </p>
      <p class="text-sm text-gray-600 my-1 py-1 italic">Where can others join in on the fun?</p>
      <hr />
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Club Name</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubName'" [showErrors]="showErrorValidations$"></ui-form-error>
      <input styled formControlName="clubName" placeholder="A Cool Club" />
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Datacenter</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubDatacenter'" [showErrors]="showErrorValidations$"></ui-form-error>
      <select styled formControlName="clubDatacenter">
        <option>Aether</option>
        <option>Primal</option>
        <option>Crystal</option>
      </select>
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">World</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubServer'" [showErrors]="showErrorValidations$"></ui-form-error>
      <select styled formControlName="clubServer">
        <optgroup label="Aether">
          <option>Adamantoise</option>
          <option>Cactuar</option>
          <option>Faerie</option>
          <option>Gilgamesh</option>
          <option>Jenova</option>
          <option>Midgardsormr</option>
          <option>Sargatanas</option>
          <option>Siren</option>
        </optgroup>
        <optgroup label="Primal">
          <option>Behemoth</option>
          <option>Excalibur</option>
          <option>Exodus</option>
          <option>Famfrit</option>
          <option>Hyperion</option>
          <option>Lamia</option>
          <option>Leviathan</option>
          <option>Ultros</option>
        </optgroup>
        <optgroup label="Crystal">
          <option>Balmung</option>
          <option>Brynhildr</option>
          <option>Coeurl</option>
          <option>Diabolos</option>
          <option>Goblin</option>
          <option>Malboro</option>
          <option>Mateus</option>
          <option>Zalera</option>
        </optgroup>
      </select>
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Residential District</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubDistrict'" [showErrors]="showErrorValidations$"></ui-form-error>
      <select styled formControlName="clubDistrict">
        <option>Empyreum</option>
        <option>Goblet</option>
        <option>Lavender Beds</option>
        <option>Mist</option>
        <option>Shirogane</option>
      </select>
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Club Ward</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubWard'" [showErrors]="showErrorValidations$"></ui-form-error>
      <input styled formControlName="clubWard" placeholder="12" type="number" />
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Club Plot</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubPlot'" [showErrors]="showErrorValidations$"></ui-form-error>
      <input styled formControlName="clubPlot" placeholder="12" type="number" />
    </div>

    <div class="block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold">Active Hours</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'clubHours'" [showErrors]="showErrorValidations$"></ui-form-error>

      <div class="my-2 ml-1">
        <label>
          <input type="radio" value="false" id="variableTimeRadio" [checked]="!isVariableTime" (click)="toggleHoursType(false)" />
          Consistent
        </label>
        <label>
          <input type="radio" value="true" id="variableTimeRadio" [checked]="isVariableTime" (click)="toggleHoursType(true)" />
          Variable
        </label>

        <p class="text-sm py-1">
          Use "Consistent" hours if the club is open regularly. "Variable" hours are for clubs that may not be open every week, or if their times
          change.
        </p>
      </div>

      <div class="p-3 border border-gray-400 rounded-md">
        <app-select-time-form
          *ngIf="!isVariableTime; else variable"
          formControlName="clubHours"
          (onHoursChanged)="updateClubHoursControlValue($event)"
        ></app-select-time-form>
        <ng-template #variable>
          <app-select-variable-time-form
            formControlName="clubHours"
            (onHoursChanged)="updateClubHoursControlValue($event)"
          ></app-select-variable-time-form>
        </ng-template>
      </div>
    </div>

    <div class="inline-block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold inline">Website</p>
      <p class="text-xs text-gray-600 italic inline">Optional</p>

      <div>
        <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'website'" [showErrors]="showErrorValidations$"></ui-form-error>
        <input styled formControlName="website" placeholder="https://mycool.ff14.club" />
      </div>
    </div>

    <div class="block text-left align-bottom my-2">
      <p class="mx-2 text-sm text-gray-800 font-semibold inline">Tags</p>
      <ui-form-error [formGroup]="composeReviewForm" [errorFor]="'tags'" [showErrors]="showErrorValidations$"></ui-form-error>

      <app-tag-select formControlName="tags" (onTagsChanged)="updateTagListControlValue($event)"></app-tag-select>

      <div class="ml-2 mt-5 p-2 border border-gray-400 rounded-md">
        <p class="mb-2 text-xs text-gray-800 font-semibold underline">Example Tags</p>
        <app-tag text="Sponsored"></app-tag>
        <app-tag text="Exclusive Access"></app-tag>
        <app-tag text="18+"></app-tag>
        <app-tag text="NSFW"></app-tag>
        <app-tag text="SFW"></app-tag>
        <app-tag text="LGBT"></app-tag>
        <app-tag text="Nightclub"></app-tag>
        <app-tag text="Host Club"></app-tag>
        <app-tag text="Twitch DJ"></app-tag>
        <app-tag text="Auctions"></app-tag>
        <app-tag text="Raffles"></app-tag>
        <app-tag text="VIP"></app-tag>
      </div>
    </div>
  </div>

  <br />

  <div *ngIf="{ isLoading: isLoading$ | async, isEditing: !!review } as buttonData">
    <button styled-blue class="w-full mt-3" type="submit" *ngIf="!buttonData.isLoading">
      {{ buttonData.isEditing ? 'Update' : 'Publish' }} Review
    </button>
    <button styled-blue-disabled class="w-full mt-3 hover:cursor-progress" type="submit" disabled="disabled" *ngIf="buttonData.isLoading">
      <i class="fa-solid fa-spinner animate-spin mx-2"></i>
      {{ isEditing ? 'Update' : 'Publish' }} Review
    </button>
  </div>

  <p *ngIf="submitError$ | async as error" class="mx-2 text-sm text-red-500">{{ error }}</p>
</form>
